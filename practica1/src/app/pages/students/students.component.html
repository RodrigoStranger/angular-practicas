
<div class="students-wrapper">
  <div class="students-container">
    <div class="form-section">
      <form [formGroup]="formEstudiante" (ngSubmit)="guardarEstudiante()" class="students-form" novalidate>
        <div class="form-header">
          <h1>Agregar Estudiante</h1>
          <p>Completa los datos para registrar un estudiante</p>
        </div>

        <div class="form-group mb-3">
          <label for="nombre">Nombre</label>
          <input type="text" id="nombre" formControlName="nombre" class="form-control" placeholder="Nombre" />
          <div *ngIf="formEstudiante.get('nombre')?.invalid && formEstudiante.get('nombre')?.touched" class="text-danger small">
            El nombre es obligatorio.
          </div>
        </div>

        <div class="form-group mb-3">
          <label for="apellido">Apellido</label>
          <input type="text" id="apellido" formControlName="apellido" class="form-control" placeholder="Apellido" />
          <div *ngIf="formEstudiante.get('apellido')?.invalid && formEstudiante.get('apellido')?.touched" class="text-danger small">
            El apellido es obligatorio.
          </div>
        </div>

        <div class="form-group mb-3">
          <label for="correo">Correo</label>
          <input type="email" id="correo" formControlName="correo" class="form-control" placeholder="Correo electrónico" />
          <div *ngIf="formEstudiante.get('correo')?.invalid && formEstudiante.get('correo')?.touched" class="text-danger small">
            <span *ngIf="formEstudiante.get('correo')?.errors?.['required']">El correo es obligatorio.</span>
            <span *ngIf="formEstudiante.get('correo')?.errors?.['email']">Ingresa un correo válido.</span>
          </div>
        </div>

        <div class="form-group mb-4">
          <label for="carrera">Carrera</label>
          <input type="text" id="carrera" formControlName="carrera" class="form-control" placeholder="Carrera" />
          <div *ngIf="formEstudiante.get('carrera')?.invalid && formEstudiante.get('carrera')?.touched" class="text-danger small">
            La carrera es obligatoria.
          </div>
        </div>


        <div class="d-flex gap-2">
          <button type="submit" class="btn btn-success flex-fill">Agregar Estudiante</button>
          <button type="button" class="btn btn-primary flex-fill">
            <i class="bi bi-pencil-square"></i> Editar
          </button>
        </div>

        <!-- Toast Bootstrap para mensajes -->
        <div aria-live="polite" aria-atomic="true" class="position-relative">
          <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1055;">
            <div *ngIf="successMsg" class="toast align-items-center text-bg-success border-0 show" role="alert" aria-live="assertive" aria-atomic="true">
              <div class="d-flex">
                <div class="toast-body">
                  {{ successMsg }}
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" aria-label="Close" (click)="successMsg = null"></button>
              </div>
            </div>
            <div *ngIf="errorMsg" class="toast align-items-center text-bg-danger border-0 show" role="alert" aria-live="assertive" aria-atomic="true">
              <div class="d-flex">
                <div class="toast-body">
                  {{ errorMsg }}
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" aria-label="Close" (click)="errorMsg = null"></button>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
    <!-- Tabla de estudiantes -->
    <div class="table-section mt-4">
      <h4>Lista de Estudiantes</h4>
      <table class="table table-striped table-bordered mt-3">
        <thead class="table-dark">
          <tr>
            <th>Nombre</th>
            <th>Apellido</th>
            <th>Correo</th>
            <th>Carrera</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let estudiante of estudiantes">
            <td>{{ estudiante.nombre }}</td>
            <td>{{ estudiante.apellido }}</td>
            <td>{{ estudiante.correo }}</td>
            <td>{{ estudiante.carrera }}</td>
            <td>
              <button type="button" class="btn btn-sm btn-primary" title="Editar">
                <i class="bi bi-pencil-square"></i> Editar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
